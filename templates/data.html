{% extends "base.html" %}
{% block content %}
<div class="card">
  <h2>Data</h2>
  <p class="small">
    Upload a CSV with at least <span class="badge">timestamp</span> and the numeric columns you have.
    Required: timestamp, heart_rate, steps, sleep_hours, calories (sample includes more).
  </p>

  <div class="row">
    <div class="card">
      <h3>Upload CSV</h3>
      <form method="post" action="{{ url_for('upload_data') }}" enctype="multipart/form-data">
        <input type="file" name="file" accept=".csv" required>
        <br><br>
        <button class="btn" type="submit">Upload & Process</button>
      </form>
    </div>
    <div class="card">
      <h3>Load Sample Data</h3>
      <p class="small">Loads a bundled dataset with injected anomalies.</p>
      <a class="btn secondary" href="{{ url_for('load_sample') }}">Load Sample</a>
      <p class="small" style="margin-top:10px;">
        Download sample CSV: <a href="{{ url_for('download_sample') }}">sample_health_data.csv</a>
      </p>
    </div>
  </div>

  <div class="card" style="margin-top:14px;">
    <h3>Current dataset status</h3>
    <p class="small">
      Records in DB for your account: <b>{{ record_count }}</b>
    </p>
    {% if record_count > 0 %}
      <a class="btn" href="{{ url_for('dashboard') }}">View Dashboard</a>
      <a class="btn danger" href="{{ url_for('clear_my_data') }}" style="margin-left:8px;">Clear My Data</a>
    {% endif %}
  </div>
</div>
{% endblock %}
